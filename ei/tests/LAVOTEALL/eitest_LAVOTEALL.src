
    library ei;
    load LAVOTEALL;
    clear t,x,n,Zb,Zw;
    t = vread(LAVOTEALL, "t");
    x = vread(LAVOTEALL, "x");
    n = vread(LAVOTEALL, "n");
    clear truth;
    Zb = 1;
    Zw = 1;

    if vin(LAVOTEALL, "Zb");
        Zb = eiread(LAVOTEALL, "Zb");
    endif;
    if vin(LAVOTEALL, "Zw");
        Zw = eiread(LAVOTEALL, "Zw");
    endif;
    if vin(LAVOTEALL, "truth");
        truth = eiread(LAVOTEALL, "truth");
        _Eres = vput(_Eres, truth, "truth");
    endif;
    if scalone(Zb) and scalone(Zw);
        dataset = t~x~n;
    else;
        dataset = t~x~n~Zb~Zw;
    endif;

    output file=LAVOTEALL/LAVOTEALL.tab RESET;
    screen off;
    print dataset;
    output OFF;
    screen on;
    _EdoSim=1;
    _Esims=100;
    rndseed(1);
    dbuf = ei(t,x,n,Zb,Zw);
    
        rndseed 1;
        res = eiread(dbuf, "aggs");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testaggs.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "beta");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testbeta.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "betaBs");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testbetaBs.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "betaWs");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testbetaWs.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "CI50b");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testCI50b.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "CI50w");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testCI50w.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "CI80bw");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testCI80bw.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "CI95bw");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testCI95bw.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "CsbetaB");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testCsbetaB.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "CsbetaW");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testCsbetaW.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "EaggBias");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testEaggBias.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "ExpVarCI");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testExpVarCI.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "ExpVarCI0");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testExpVarCI0.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "ExpVarCIs");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testExpVarCIs.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "GEbw");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testGEbw.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "GEbwa");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testGEbwa.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "GEwb");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testGEwb.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "GEwba");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testGEwba.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "Maggs");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testMaggs.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "mpPsiu");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testmpPsiu.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "Paggs");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testPaggs.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "psi");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testpsi.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "R");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testR.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "sbetaB");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testsbetaB.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "sbetaW");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testsbetaW.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "tsims");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testtsims.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "tsims0");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testtsims0.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "VCaggs");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testVCaggs.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "ABounds");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testABounds.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "bounds");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testbounds.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "phi");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testphi.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "psiu");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testpsiu.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;
        rndseed 1;
        res = eiread(dbuf, "VCphi");
        res = reshape(res, rows(res)*cols(res), 1);
        output file=LAVOTEALL/testVCphi.tab RESET;
        screen off;
        print res;
        output OFF;
        screen on;