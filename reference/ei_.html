<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Run (tidy) Ecological Inference Estimation and Simulation"><title>Run (tidy) Ecological Inference Estimation and Simulation — ei_ • ei</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run (tidy) Ecological Inference Estimation and Simulation — ei_"><meta property="og:description" content="Run (tidy) Ecological Inference Estimation and Simulation"><meta property="og:image" content="https://iqss-research.github.io/ei/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ei</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-user-s-guide">User's Guide</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-user-s-guide">
    <a class="dropdown-item" href="../articles/ei-introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/ei-2x2.html">2x2 case</a>
    <a class="dropdown-item" href="../articles/ei-RxC.html">RxC case</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/iqss-research/ei/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run (tidy) Ecological Inference Estimation and Simulation</h1>
      <small class="dont-index">Source: <a href="https://github.com/iqss-research/ei/blob/HEAD/R/tidy.R" class="external-link"><code>R/tidy.R</code></a></small>
      <div class="d-none name"><code>ei_.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Run (tidy) Ecological Inference Estimation and Simulation</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ei_</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">t</span>,</span>
<span>  <span class="va">n</span>,</span>
<span>  Zb <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Zw <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  erho <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">0.1</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  esigma <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  ebeta <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  ealphab <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  ealphaw <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  truth <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  simulate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ndraws <span class="op">=</span> <span class="fl">99</span>,</span>
<span>  nsims <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  covariate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lambda1 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  lambda2 <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  covariate.prior.list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tune.list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start.list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sample <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  thin <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  burnin <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  ret.beta <span class="op">=</span> <span class="st">"r"</span>,</span>
<span>  ret.mcmc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  usrfun <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>data where `x`, `t`, `total`, `Zb`, `Zw` are found</p></dd>


<dt>x</dt>
<dd><p>&lt;[`data-masking`][dplyr_data_masking]&gt; column of subgroup proportions in data</p></dd>


<dt>t</dt>
<dd><p>&lt;[`data-masking`][dplyr_data_masking]&gt; column of turnout in data</p></dd>


<dt>n</dt>
<dd><p>&lt;[`data-masking`][dplyr_data_masking]&gt; column of total in data</p></dd>


<dt>Zb</dt>
<dd><p>&lt;[`data-masking`][dplyr_tidy_select]&gt; columns of covariates in data</p></dd>


<dt>Zw</dt>
<dd><p>&lt;[`data-masking`][dplyr_tidy_select]&gt; columns of covariates in data</p></dd>


<dt>id</dt>
<dd><p>&lt;[`data-masking`][dplyr_data_masking]&gt; column of unique ids in data</p></dd>


<dt>erho</dt>
<dd><p>The standard deviation of the normal prior on \(\phi_5\) for
the correlation. Numeric vector, used one at a time, in order. Default `c(.5, 3, 5, .1, 10)`.</p></dd>


<dt>esigma</dt>
<dd><p>The standard deviation of an underlying normal distribution,
from which a half normal is constructed as a prior for both
\(\breve{\sigma}_b\) and \(\breve{\sigma}_w\). Default \(= 0.5\)</p></dd>


<dt>ebeta</dt>
<dd><p>Standard deviation of the "flat normal" prior on
\(\breve{B}^b\) and \(\breve{B}^w\).  The flat normal prior is uniform
within the unit square and dropping outside the square according to the
normal distribution.  Set to zero for no prior. Setting to positive values
probabilistically keeps the estimated mode within the unit square.
Default\(=0.5\)</p></dd>


<dt>ealphab</dt>
<dd><p>cols(Zb) x 2 matrix of means (in the first column) and
standard deviations (in the second) of an independent normal prior
distribution on elements of \(\alpha^b\).  If you specify Zb, you should
probably specify a prior, at least with mean zero and some variance (default
is no prior).  (See Equation 9.2, page 170, to interpret \(\alpha^b\)).</p></dd>


<dt>ealphaw</dt>
<dd><p>cols(Zw) x 2 matrix of means (in the first column) and
standard deviations (in the second) of an independent normal prior
distribution on elements of \(\alpha^w\).  If you specify Zw, you should
probably specify a prior, at least with mean zero and some variance (default
is no prior).  (See Equation 9.2, page 170, to interpret \(\alpha^w\)).</p></dd>


<dt>truth</dt>
<dd><p>A length(t) x 2 matrix of the true values of the quantities of
interest.</p></dd>


<dt>simulate</dt>
<dd><p>default = TRUE:see documentation in <code>eiPack</code> for
options for RxC ei.</p></dd>


<dt>ndraws</dt>
<dd><p>integer. The number of draws. Default is 99.</p></dd>


<dt>nsims</dt>
<dd><p>integer. The number of simulations within each draw. Default is 100.</p></dd>


<dt>covariate</dt>
<dd><p>see documentation in <code>eiPack</code> for options for RxC ei.</p></dd>


<dt>lambda1</dt>
<dd><p>default = 4:see documentation in <code>eiPack</code> for options
for RxC ei.</p></dd>


<dt>lambda2</dt>
<dd><p>default = 2:see documentation in <code>eiPack</code> for options
for RxC ei.</p></dd>


<dt>covariate.prior.list</dt>
<dd><p>see documentation in <code>eiPack</code> for options
for RxC ei.</p></dd>


<dt>tune.list</dt>
<dd><p>see documentation in <code>eiPack</code> for options for RxC ei.</p></dd>


<dt>start.list</dt>
<dd><p>see documentation in <code>eiPack</code> for options for RxC ei.</p></dd>


<dt>sample</dt>
<dd><p>default = 1000</p></dd>


<dt>thin</dt>
<dd><p>default = 1</p></dd>


<dt>burnin</dt>
<dd><p>default = 1000</p></dd>


<dt>verbose</dt>
<dd><p>default = 0:see documentation in <code>eiPack</code> for options
for RxC ei.</p></dd>


<dt>ret.beta</dt>
<dd><p>default = "r": see documentation in <code>eiPack</code> for
options for RxC ei.</p></dd>


<dt>ret.mcmc</dt>
<dd><p>default = TRUE: see documentation in <code>eiPack</code> for
options for RxC ei.</p></dd>


<dt>usrfun</dt>
<dd><p>see documentation in <code>eiPack</code> for options for RxC ei.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>ei_tbl</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sample_ei</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dbuf</span> <span class="op">&lt;-</span> <span class="fu">ei_</span><span class="op">(</span><span class="va">sample_ei</span>, <span class="va">x</span>, <span class="va">t</span>, <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Running 2x2 ei</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Maximizing likelihood for `erho` = 0.5.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Running 2x2 ei</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Maximizing likelihood for `erho` = 3.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Running 2x2 ei</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Maximizing likelihood for `erho` = 5.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Running 2x2 ei</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Maximizing likelihood for `erho` = 0.1.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Running 2x2 ei</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Running 2x2 ei <span style="color: #B2B2B2;">[1ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ⠙ Beginning importance sampling.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Beginning importance sampling. <span style="color: #B2B2B2;">[2.2s]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://gking.harvard.edu/" class="external-link">Gary King</a>, <a href="http://www.margaretroberts.net/" class="external-link">Molly Roberts</a>, <a href="https://christophertkenny.com/" class="external-link">Christopher T. Kenny</a>, <a href="https://shusei-e.github.io" class="external-link">Shusei Eshima</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

