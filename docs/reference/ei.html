<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Ecological Inference Estimation — ei • ei</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Ecological Inference Estimation — ei" />
<meta property="og:description" content="ei is the main command in the package EI.  It gives
observation-level estimates (and various related statistics) of
\(\beta_i^b\) and \(\beta_i^w\) given variables \(T_i\) and \(X_i\)
(\(i=1,...,n\)) in this accounting identity: \(T_i=\beta_i^b*X_i +
\beta_i^w*(1-X_i)\).  Results are stored in an ei object, that can be
read with summary() or eiread() and graphed in plot()." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ei</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ei.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Ecological Inference Estimation</h1>
    
    <div class="hidden name"><code>ei.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>ei</code> is the main command in the package <code>EI</code>.  It gives
observation-level estimates (and various related statistics) of
\(\beta_i^b\) and \(\beta_i^w\) given variables \(T_i\) and \(X_i\)
(\(i=1,...,n\)) in this accounting identity: \(T_i=\beta_i^b*X_i +
\beta_i^w*(1-X_i)\).  Results are stored in an <code>ei</code> object, that can be
read with <code><a href='https://rdrr.io/r/base/summary.html'>summary()</a></code> or <code><a href='eiread.html'>eiread()</a></code> and graphed in <code><a href='https://rdrr.io/r/graphics/plot.default.html'>plot()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>ei</span><span class='op'>(</span>
  <span class='va'>formula</span>,
  total <span class='op'>=</span> <span class='cn'>NULL</span>,
  Zb <span class='op'>=</span> <span class='fl'>1</span>,
  Zw <span class='op'>=</span> <span class='fl'>1</span>,
  id <span class='op'>=</span> <span class='cn'>NA</span>,
  data <span class='op'>=</span> <span class='cn'>NA</span>,
  erho <span class='op'>=</span> <span class='fl'>0.5</span>,
  esigma <span class='op'>=</span> <span class='fl'>0.5</span>,
  ebeta <span class='op'>=</span> <span class='fl'>0.5</span>,
  ealphab <span class='op'>=</span> <span class='cn'>NA</span>,
  ealphaw <span class='op'>=</span> <span class='cn'>NA</span>,
  truth <span class='op'>=</span> <span class='cn'>NA</span>,
  simulate <span class='op'>=</span> <span class='cn'>TRUE</span>,
  covariate <span class='op'>=</span> <span class='cn'>NULL</span>,
  lambda1 <span class='op'>=</span> <span class='fl'>4</span>,
  lambda2 <span class='op'>=</span> <span class='fl'>2</span>,
  covariate.prior.list <span class='op'>=</span> <span class='cn'>NULL</span>,
  tune.list <span class='op'>=</span> <span class='cn'>NULL</span>,
  start.list <span class='op'>=</span> <span class='cn'>NULL</span>,
  sample <span class='op'>=</span> <span class='fl'>1000</span>,
  thin <span class='op'>=</span> <span class='fl'>1</span>,
  burnin <span class='op'>=</span> <span class='fl'>1000</span>,
  verbose <span class='op'>=</span> <span class='fl'>0</span>,
  ret.beta <span class='op'>=</span> <span class='st'>"r"</span>,
  ret.mcmc <span class='op'>=</span> <span class='cn'>TRUE</span>,
  usrfun <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>A formula of the form \(t ~x\) in the \(2x2\) case and
\(cbind(col1,col2,...) ~ cbind(row1,row2,...)\) in the RxC case.</p></td>
    </tr>
    <tr>
      <th>total</th>
      <td><p>`total' is the name of the variable in the dataset that
contains the number of individuals in each unit</p></td>
    </tr>
    <tr>
      <th>Zb</th>
      <td><p>\(p\) x \(k^b\) matrix of covariates or the name of covariates
in the dataset</p></td>
    </tr>
    <tr>
      <th>Zw</th>
      <td><p>\(p\) x \(k^w\) matrix of covariates or the name of covariates
in the dataset</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>`id' is the name of the variable in the dataset that identifies
the precinct. Used for `movie' and `movieD' plot functions.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>data frame that contains the variables that correspond to
formula.  If using covariates and data is specified, data should also
contain <code>Zb</code> and <code>Zw</code>.</p></td>
    </tr>
    <tr>
      <th>erho</th>
      <td><p>The standard deviation of the normal prior on \(\phi_5\) for
the correlation. Default \(=0.5\).</p></td>
    </tr>
    <tr>
      <th>esigma</th>
      <td><p>The standard deviation of an underlying normal distribution,
from which a half normal is constructed as a prior for both
\(\breve{\sigma}_b\) and \(\breve{\sigma}_w\). Default \(= 0.5\)</p></td>
    </tr>
    <tr>
      <th>ebeta</th>
      <td><p>Standard deviation of the "flat normal" prior on
\(\breve{B}^b\) and \(\breve{B}^w\).  The flat normal prior is uniform
within the unit square and dropping outside the square according to the
normal distribution.  Set to zero for no prior. Setting to positive values
probabilistically keeps the estimated mode within the unit square.
Default\(=0.5\)</p></td>
    </tr>
    <tr>
      <th>ealphab</th>
      <td><p>cols(Zb) x 2 matrix of means (in the first column) and
standard deviations (in the second) of an independent normal prior
distribution on elements of \(\alpha^b\).  If you specify Zb, you should
probably specify a prior, at least with mean zero and some variance (default
is no prior).  (See Equation 9.2, page 170, to interpret \(\alpha^b\)).</p></td>
    </tr>
    <tr>
      <th>ealphaw</th>
      <td><p>cols(Zw) x 2 matrix of means (in the first column) and
standard deviations (in the second) of an independent normal prior
distribution on elements of \(\alpha^w\).  If you specify Zw, you should
probably specify a prior, at least with mean zero and some variance (default
is no prior).  (See Equation 9.2, page 170, to interpret \(\alpha^w\)).</p></td>
    </tr>
    <tr>
      <th>truth</th>
      <td><p>A length(t) x 2 matrix of the true values of the quantities of
interest.</p></td>
    </tr>
    <tr>
      <th>simulate</th>
      <td><p>default = TRUE:see documentation in <code>eiPack</code> for
options for RxC ei.</p></td>
    </tr>
    <tr>
      <th>covariate</th>
      <td><p>see documentation in <code>eiPack</code> for options for RxC ei.</p></td>
    </tr>
    <tr>
      <th>lambda1</th>
      <td><p>default = 4:see documentation in <code>eiPack</code> for options
for RxC ei.</p></td>
    </tr>
    <tr>
      <th>lambda2</th>
      <td><p>default = 2:see documentation in <code>eiPack</code> for options
for RxC ei.</p></td>
    </tr>
    <tr>
      <th>covariate.prior.list</th>
      <td><p>see documentation in <code>eiPack</code> for options
for RxC ei.</p></td>
    </tr>
    <tr>
      <th>tune.list</th>
      <td><p>see documentation in <code>eiPack</code> for options for RxC ei.</p></td>
    </tr>
    <tr>
      <th>start.list</th>
      <td><p>see documentation in <code>eiPack</code> for options for RxC ei.</p></td>
    </tr>
    <tr>
      <th>sample</th>
      <td><p>default = 1000</p></td>
    </tr>
    <tr>
      <th>thin</th>
      <td><p>default = 1</p></td>
    </tr>
    <tr>
      <th>burnin</th>
      <td><p>default = 1000</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>default = 0:see documentation in <code>eiPack</code> for options
for RxC ei.</p></td>
    </tr>
    <tr>
      <th>ret.beta</th>
      <td><p>default = "r": see documentation in <code>eiPack</code> for
options for RxC ei.</p></td>
    </tr>
    <tr>
      <th>ret.mcmc</th>
      <td><p>default = TRUE: see documentation in <code>eiPack</code> for
options for RxC ei.</p></td>
    </tr>
    <tr>
      <th>usrfun</th>
      <td><p>see documentation in <code>eiPack</code> for options for RxC ei.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>TODO</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>EI</code> algorithm is run using the <code>ei</code> command.  A summary of
the results can be seen graphically using <code><a href='https://rdrr.io/r/graphics/plot.default.html'>plot(ei.object)</a></code> or
numerically using <code><a href='https://rdrr.io/r/base/summary.html'>summary(ei.object)</a></code>.  Quantities of interest can be
calculated using <code><a href='eiread.html'>eiread(ei.object)</a></code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Gary King (1997). A Solution to the Ecological Inference
Problem.  Princeton: Princeton University Press.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Gary King &lt;&lt;email: king@harvard.edu&gt;&gt; and Molly Roberts &lt;&lt;email:
molly.e.roberts@gmail.com&gt;&gt;</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>sample</span><span class='op'>)</span>
<span class='va'>form</span> <span class='op'>&lt;-</span> <span class='va'>t</span> <span class='op'>~</span> <span class='va'>x</span>
<span class='va'>dbuf</span> <span class='op'>&lt;-</span> <span class='fu'>ei</span><span class='op'>(</span><span class='va'>form</span>, total <span class='op'>=</span> <span class='st'>"n"</span>, data <span class='op'>=</span> <span class='va'>sample</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "Running 2x2 ei"</div><div class='output co'>#&gt; <span class='message'>Maximizing likelihood</span></div><div class='output co'>#&gt; <span class='message'>Importance Sampling..</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>dbuf</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $Erho
#&gt; [1] 0.5
#&gt; 
#&gt; $Esigma
#&gt; [1] 0.5
#&gt; 
#&gt; $Ebeta
#&gt; [1] 0.5
#&gt; 
#&gt; $N
#&gt; [1] 75
#&gt; 
#&gt; $Resamp
#&gt; [1] 38
#&gt; 
#&gt; $`Maximum likelihood results in scale of estimation (and se's)`
#&gt;         Bb0       Bw0       sigB       sigW       rho Zb Zw
#&gt;  -1.1533874 0.8214529 -2.2860101 -1.8816375 0.4128279  0  0
#&gt;   0.1017326 0.1017090  0.2495333  0.1572852 0.3659882  0  0
#&gt; 
#&gt; $`Untruncated psi's`
#&gt;         BB        BW        SB        SW       RHO
#&gt;  0.1980286 0.7241188 0.1082916 0.1541697 0.3277046
#&gt; 
#&gt; $`Truncated psi's (ultimate scale)`
#&gt;         BB        BW         SB        SW       RHO
#&gt;  0.2049727 0.7122177 0.09869795 0.1419449 0.2729556
#&gt; 
#&gt; $`Aggregate Bounds`
#&gt;            betab     betaw
#&gt; lower 0.09549504 0.3979843
#&gt; upper 0.60893461 0.8031228
#&gt; 
#&gt; $`Estimates of Aggregate Quantities of Interest`
#&gt;         mean          sd
#&gt; Bb 0.2048612 0.011700312
#&gt; Bw 0.7168255 0.009232336
#&gt; 
#&gt; $precision
#&gt; [1] 4
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "summary"</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gary King, Molly Roberts.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


